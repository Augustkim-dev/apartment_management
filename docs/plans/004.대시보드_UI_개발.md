# Phase 4: 대시보드 UI 개발

## 개요
관리자와 입주민이 전기료 정보를 쉽게 조회하고 관리할 수 있는 직관적인 대시보드를 구현합니다. Next.js App Router와 Tailwind CSS를 활용하여 반응형 UI를 개발합니다.

## 목표
- 관리자 대시보드 구현
- 청구서 조회 및 관리 UI
- 호실 관리 인터페이스
- 통계 및 차트 표시
- 청구서 출력 기능

## 작업 내용

### 1. UI 컴포넌트 라이브러리 설정

#### 1.1 필요 패키지 설치
```bash
npm install @headlessui/react @heroicons/react recharts date-fns
npm install react-hot-toast react-hook-form
npm install --save-dev @types/react
```

### 2. 레이아웃 구조

#### 2.1 루트 레이아웃 (`app/layout.tsx`)
```typescript
import type { Metadata } from 'next';
import { Inter } from 'next/font/google';
import './globals.css';
import { Toaster } from 'react-hot-toast';

const inter = Inter({ subsets: ['latin'] });

export const metadata: Metadata = {
  title: '아르노빌리지 전기료 관리 시스템',
  description: '오피스텔 전기료 자동 분배 및 관리 시스템',
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="ko">
      <body className={inter.className}>
        {children}
        <Toaster position="top-right" />
      </body>
    </html>
  );
}
```

#### 2.2 대시보드 레이아웃 (`app/dashboard/layout.tsx`)
```typescript
'use client';

import { useState } from 'react';
import Link from 'next/link';
import { usePathname, useRouter } from 'next/navigation';
import {
  HomeIcon,
  DocumentTextIcon,
  BuildingOfficeIcon,
  ChartBarIcon,
  ArrowUpTrayIcon,
  Cog6ToothIcon,
  ArrowLeftOnRectangleIcon,
  Bars3Icon,
  XMarkIcon,
} from '@heroicons/react/24/outline';

const navigation = [
  { name: '대시보드', href: '/dashboard', icon: HomeIcon },
  { name: '청구서 관리', href: '/dashboard/bills', icon: DocumentTextIcon },
  { name: '호실 관리', href: '/dashboard/units', icon: BuildingOfficeIcon },
  { name: '데이터 업로드', href: '/dashboard/upload', icon: ArrowUpTrayIcon },
  { name: '통계', href: '/dashboard/stats', icon: ChartBarIcon },
  { name: '설정', href: '/dashboard/settings', icon: Cog6ToothIcon },
];

export default function DashboardLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  const pathname = usePathname();
  const router = useRouter();
  const [sidebarOpen, setSidebarOpen] = useState(false);

  const handleLogout = async () => {
    await fetch('/api/auth/logout', { method: 'POST' });
    router.push('/login');
  };

  return (
    <div className="min-h-screen bg-gray-50">
      {/* Mobile sidebar */}
      <div className={`lg:hidden ${sidebarOpen ? 'block' : 'hidden'}`}>
        <div className="fixed inset-0 z-50 flex">
          <div className="fixed inset-0 bg-gray-600 bg-opacity-75" onClick={() => setSidebarOpen(false)} />
          <div className="relative flex w-full max-w-xs flex-1 flex-col bg-white">
            <div className="absolute top-0 right-0 -mr-12 pt-2">
              <button
                type="button"
                className="ml-1 flex h-10 w-10 items-center justify-center rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white"
                onClick={() => setSidebarOpen(false)}
              >
                <XMarkIcon className="h-6 w-6 text-white" />
              </button>
            </div>
            <div className="h-0 flex-1 overflow-y-auto pt-5 pb-4">
              <div className="flex flex-shrink-0 items-center px-4">
                <h2 className="text-lg font-semibold">아르노빌리지</h2>
              </div>
              <nav className="mt-5 space-y-1 px-2">
                {navigation.map((item) => (
                  <Link
                    key={item.name}
                    href={item.href}
                    className={`${
                      pathname === item.href
                        ? 'bg-blue-50 text-blue-600'
                        : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900'
                    } group flex items-center px-2 py-2 text-base font-medium rounded-md`}
                  >
                    <item.icon className="mr-4 h-6 w-6" />
                    {item.name}
                  </Link>
                ))}
              </nav>
            </div>
            <div className="flex flex-shrink-0 border-t border-gray-200 p-4">
              <button
                onClick={handleLogout}
                className="group flex w-full items-center px-2 py-2 text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 rounded-md"
              >
                <ArrowLeftOnRectangleIcon className="mr-3 h-5 w-5" />
                로그아웃
              </button>
            </div>
          </div>
        </div>
      </div>

      {/* Desktop sidebar */}
      <div className="hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col">
        <div className="flex min-h-0 flex-1 flex-col bg-white border-r border-gray-200">
          <div className="flex h-16 flex-shrink-0 items-center px-4 border-b border-gray-200">
            <h2 className="text-lg font-semibold">아르노빌리지</h2>
          </div>
          <div className="flex flex-1 flex-col overflow-y-auto">
            <nav className="flex-1 space-y-1 px-2 py-4">
              {navigation.map((item) => (
                <Link
                  key={item.name}
                  href={item.href}
                  className={`${
                    pathname === item.href
                      ? 'bg-blue-50 text-blue-600'
                      : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900'
                  } group flex items-center px-2 py-2 text-sm font-medium rounded-md`}
                >
                  <item.icon className="mr-3 h-5 w-5" />
                  {item.name}
                </Link>
              ))}
            </nav>
          </div>
          <div className="flex flex-shrink-0 border-t border-gray-200 p-4">
            <button
              onClick={handleLogout}
              className="group flex w-full items-center px-2 py-2 text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 rounded-md"
            >
              <ArrowLeftOnRectangleIcon className="mr-3 h-5 w-5" />
              로그아웃
            </button>
          </div>
        </div>
      </div>

      {/* Main content */}
      <div className="lg:pl-64">
        <div className="sticky top-0 z-10 flex h-16 flex-shrink-0 bg-white shadow lg:hidden">
          <button
            type="button"
            className="px-4 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500"
            onClick={() => setSidebarOpen(true)}
          >
            <Bars3Icon className="h-6 w-6" />
          </button>
          <div className="flex flex-1 items-center justify-center">
            <h1 className="text-lg font-semibold">전기료 관리 시스템</h1>
          </div>
        </div>
        <main className="flex-1">
          <div className="py-6">
            <div className="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
              {children}
            </div>
          </div>
        </main>
      </div>
    </div>
  );
}
```

### 3. 대시보드 메인 페이지

#### 3.1 대시보드 홈 (`app/dashboard/page.tsx`)
```typescript
'use client';

import { useEffect, useState } from 'react';
import { format } from 'date-fns';
import { ko } from 'date-fns/locale';
import {
  CurrencyDollarIcon,
  BuildingOfficeIcon,
  DocumentTextIcon,
  ExclamationTriangleIcon,
} from '@heroicons/react/24/outline';
import { LineChart, Line, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';

interface DashboardStats {
  currentMonth: {
    totalAmount: number;
    totalUsage: number;
    unitCount: number;
    unpaidCount: number;
  };
  monthlyTrend: Array<{
    month: string;
    amount: number;
    usage: number;
  }>;
  topUsageUnits: Array<{
    unitNumber: string;
    usage: number;
    amount: number;
  }>;
}

export default function DashboardPage() {
  const [stats, setStats] = useState<DashboardStats | null>(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    fetchDashboardStats();
  }, []);

  const fetchDashboardStats = async () => {
    try {
      const response = await fetch('/api/dashboard/stats');
      const data = await response.json();
      setStats(data);
    } catch (error) {
      console.error('Failed to fetch stats:', error);
    } finally {
      setLoading(false);
    }
  };

  if (loading) {
    return (
      <div className="flex justify-center items-center h-64">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
      </div>
    );
  }

  const statCards = [
    {
      title: '이번 달 총 청구액',
      value: `${stats?.currentMonth.totalAmount.toLocaleString()}원`,
      icon: CurrencyDollarIcon,
      color: 'bg-blue-500',
    },
    {
      title: '총 사용량',
      value: `${stats?.currentMonth.totalUsage.toLocaleString()} kWh`,
      icon: DocumentTextIcon,
      color: 'bg-green-500',
    },
    {
      title: '입주 호실',
      value: `${stats?.currentMonth.unitCount}개`,
      icon: BuildingOfficeIcon,
      color: 'bg-purple-500',
    },
    {
      title: '미납 호실',
      value: `${stats?.currentMonth.unpaidCount}개`,
      icon: ExclamationTriangleIcon,
      color: 'bg-red-500',
    },
  ];

  return (
    <div>
      <div className="mb-8">
        <h1 className="text-2xl font-bold text-gray-900">대시보드</h1>
        <p className="mt-1 text-sm text-gray-600">
          {format(new Date(), 'yyyy년 MM월', { locale: ko })} 전기료 현황
        </p>
      </div>

      {/* 통계 카드 */}
      <div className="grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4">
        {statCards.map((stat) => (
          <div key={stat.title} className="bg-white overflow-hidden shadow rounded-lg">
            <div className="p-5">
              <div className="flex items-center">
                <div className={`flex-shrink-0 ${stat.color} rounded-md p-3`}>
                  <stat.icon className="h-6 w-6 text-white" />
                </div>
                <div className="ml-5 w-0 flex-1">
                  <dl>
                    <dt className="text-sm font-medium text-gray-500 truncate">
                      {stat.title}
                    </dt>
                    <dd className="text-lg font-semibold text-gray-900">
                      {stat.value}
                    </dd>
                  </dl>
                </div>
              </div>
            </div>
          </div>
        ))}
      </div>

      {/* 차트 섹션 */}
      <div className="mt-8 grid grid-cols-1 gap-8 lg:grid-cols-2">
        {/* 월별 추이 차트 */}
        <div className="bg-white shadow rounded-lg p-6">
          <h3 className="text-lg font-medium text-gray-900 mb-4">월별 청구액 추이</h3>
          <ResponsiveContainer width="100%" height={300}>
            <LineChart data={stats?.monthlyTrend}>
              <CartesianGrid strokeDasharray="3 3" />
              <XAxis dataKey="month" />
              <YAxis />
              <Tooltip formatter={(value) => `${value.toLocaleString()}원`} />
              <Line type="monotone" dataKey="amount" stroke="#3B82F6" strokeWidth={2} />
            </LineChart>
          </ResponsiveContainer>
        </div>

        {/* 상위 사용 호실 */}
        <div className="bg-white shadow rounded-lg p-6">
          <h3 className="text-lg font-medium text-gray-900 mb-4">사용량 상위 호실</h3>
          <ResponsiveContainer width="100%" height={300}>
            <BarChart data={stats?.topUsageUnits}>
              <CartesianGrid strokeDasharray="3 3" />
              <XAxis dataKey="unitNumber" />
              <YAxis />
              <Tooltip formatter={(value) => `${value.toLocaleString()} kWh`} />
              <Bar dataKey="usage" fill="#10B981" />
            </BarChart>
          </ResponsiveContainer>
        </div>
      </div>

      {/* 최근 활동 */}
      <div className="mt-8 bg-white shadow rounded-lg">
        <div className="px-6 py-4 border-b border-gray-200">
          <h3 className="text-lg font-medium text-gray-900">최근 활동</h3>
        </div>
        <ul className="divide-y divide-gray-200">
          <li className="px-6 py-4">
            <div className="flex items-center justify-between">
              <div>
                <p className="text-sm font-medium text-gray-900">2025년 1월 청구서 생성</p>
                <p className="text-sm text-gray-500">관리자 • 2시간 전</p>
              </div>
              <span className="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                완료
              </span>
            </div>
          </li>
          <li className="px-6 py-4">
            <div className="flex items-center justify-between">
              <div>
                <p className="text-sm font-medium text-gray-900">203호 전기료 납부</p>
                <p className="text-sm text-gray-500">5시간 전</p>
              </div>
              <span className="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                납부
              </span>
            </div>
          </li>
        </ul>
      </div>
    </div>
  );
}
```

### 4. 청구서 관리 페이지

#### 4.1 청구서 목록 (`app/dashboard/bills/page.tsx`)
```typescript
'use client';

import { useState, useEffect } from 'react';
import Link from 'next/link';
import { format } from 'date-fns';
import { 
  DocumentTextIcon, 
  EyeIcon, 
  PrinterIcon,
  CalculatorIcon,
  MagnifyingGlassIcon,
} from '@heroicons/react/24/outline';

interface MonthlyBill {
  id: number;
  billYear: number;
  billMonth: number;
  totalAmount: number;
  totalUsage: number;
  unitCount: number;
  paidCount: number;
  createdAt: string;
}

export default function BillsPage() {
  const [bills, setBills] = useState<MonthlyBill[]>([]);
  const [loading, setLoading] = useState(true);
  const [searchTerm, setSearchTerm] = useState('');

  useEffect(() => {
    fetchBills();
  }, []);

  const fetchBills = async () => {
    try {
      const response = await fetch('/api/bills');
      const data = await response.json();
      setBills(data);
    } catch (error) {
      console.error('Failed to fetch bills:', error);
    } finally {
      setLoading(false);
    }
  };

  const handleRecalculate = async (billId: number) => {
    if (!confirm('청구서를 재계산하시겠습니까?')) return;
    
    try {
      const response = await fetch('/api/calculate/recalculate', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ billId }),
      });
      
      if (response.ok) {
        toast.success('재계산이 완료되었습니다.');
        fetchBills();
      }
    } catch (error) {
      toast.error('재계산 중 오류가 발생했습니다.');
    }
  };

  const filteredBills = bills.filter(bill => {
    const searchString = `${bill.billYear}년 ${bill.billMonth}월`;
    return searchString.includes(searchTerm);
  });

  return (
    <div>
      <div className="sm:flex sm:items-center sm:justify-between mb-8">
        <div>
          <h1 className="text-2xl font-bold text-gray-900">청구서 관리</h1>
          <p className="mt-1 text-sm text-gray-600">월별 전기료 청구서를 관리합니다</p>
        </div>
        <div className="mt-4 sm:mt-0">
          <Link
            href="/dashboard/upload"
            className="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700"
          >
            <DocumentTextIcon className="h-5 w-5 mr-2" />
            새 청구서 생성
          </Link>
        </div>
      </div>

      {/* 검색 */}
      <div className="mb-6">
        <div className="relative">
          <MagnifyingGlassIcon className="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400" />
          <input
            type="text"
            placeholder="연월로 검색 (예: 2025년 1월)"
            className="pl-10 pr-3 py-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
            value={searchTerm}
            onChange={(e) => setSearchTerm(e.target.value)}
          />
        </div>
      </div>

      {/* 청구서 목록 */}
      <div className="bg-white shadow overflow-hidden sm:rounded-md">
        <ul className="divide-y divide-gray-200">
          {filteredBills.map((bill) => (
            <li key={bill.id}>
              <div className="px-4 py-4 sm:px-6 hover:bg-gray-50">
                <div className="flex items-center justify-between">
                  <div className="flex items-center">
                    <DocumentTextIcon className="h-10 w-10 text-gray-400 mr-4" />
                    <div>
                      <p className="text-sm font-medium text-gray-900">
                        {bill.billYear}년 {bill.billMonth}월 청구서
                      </p>
                      <p className="text-sm text-gray-500">
                        총 {bill.totalAmount.toLocaleString()}원 • {bill.totalUsage.toLocaleString()} kWh
                      </p>
                      <p className="text-xs text-gray-400 mt-1">
                        {bill.paidCount}/{bill.unitCount} 호실 납부 완료
                      </p>
                    </div>
                  </div>
                  <div className="flex items-center space-x-2">
                    <Link
                      href={`/dashboard/bills/${bill.id}`}
                      className="p-2 text-gray-400 hover:text-blue-600"
                      title="상세보기"
                    >
                      <EyeIcon className="h-5 w-5" />
                    </Link>
                    <button
                      onClick={() => handleRecalculate(bill.id)}
                      className="p-2 text-gray-400 hover:text-green-600"
                      title="재계산"
                    >
                      <CalculatorIcon className="h-5 w-5" />
                    </button>
                    <Link
                      href={`/dashboard/bills/${bill.id}/print`}
                      className="p-2 text-gray-400 hover:text-purple-600"
                      title="출력"
                    >
                      <PrinterIcon className="h-5 w-5" />
                    </Link>
                  </div>
                </div>
              </div>
            </li>
          ))}
        </ul>
      </div>
    </div>
  );
}
```

### 5. 데이터 업로드 페이지

#### 5.1 업로드 페이지 (`app/dashboard/upload/page.tsx`)
```typescript
'use client';

import { useState } from 'react';
import { useRouter } from 'next/navigation';
import { FileUpload } from '@/components/FileUpload';
import toast from 'react-hot-toast';

export default function UploadPage() {
  const router = useRouter();
  const [step, setStep] = useState(1);
  const [pdfData, setPdfData] = useState(null);
  const [excelData, setExcelData] = useState(null);
  const [isProcessing, setIsProcessing] = useState(false);

  const handlePdfUpload = (data: any) => {
    setPdfData(data);
    toast.success('PDF 파싱 완료');
    setStep(2);
  };

  const handleExcelUpload = (data: any) => {
    setExcelData(data);
    toast.success('Excel 파싱 완료');
  };

  const handleProcess = async () => {
    if (!pdfData || !excelData) {
      toast.error('PDF와 Excel 파일을 모두 업로드해주세요.');
      return;
    }

    setIsProcessing(true);
    
    try {
      const response = await fetch('/api/calculate', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          invoice: pdfData,
          unitUsages: excelData,
        }),
      });

      const result = await response.json();
      
      if (result.success) {
        toast.success('청구서가 생성되었습니다.');
        router.push(`/dashboard/bills/${result.billId}`);
      } else {
        toast.error(result.error || '처리 중 오류가 발생했습니다.');
      }
    } catch (error) {
      toast.error('서버 오류가 발생했습니다.');
    } finally {
      setIsProcessing(false);
    }
  };

  return (
    <div>
      <div className="mb-8">
        <h1 className="text-2xl font-bold text-gray-900">데이터 업로드</h1>
        <p className="mt-1 text-sm text-gray-600">
          한전 청구서와 호실별 사용량 데이터를 업로드하여 청구서를 생성합니다
        </p>
      </div>

      {/* 진행 단계 표시 */}
      <div className="mb-8">
        <div className="flex items-center justify-between">
          <div className={`flex items-center ${step >= 1 ? 'text-blue-600' : 'text-gray-400'}`}>
            <div className={`rounded-full h-10 w-10 flex items-center justify-center border-2 ${
              step >= 1 ? 'border-blue-600 bg-blue-600 text-white' : 'border-gray-300'
            }`}>
              1
            </div>
            <span className="ml-2 font-medium">PDF 업로드</span>
          </div>
          <div className={`flex-1 h-1 mx-4 ${step >= 2 ? 'bg-blue-600' : 'bg-gray-300'}`} />
          <div className={`flex items-center ${step >= 2 ? 'text-blue-600' : 'text-gray-400'}`}>
            <div className={`rounded-full h-10 w-10 flex items-center justify-center border-2 ${
              step >= 2 ? 'border-blue-600 bg-blue-600 text-white' : 'border-gray-300'
            }`}>
              2
            </div>
            <span className="ml-2 font-medium">Excel 업로드</span>
          </div>
          <div className={`flex-1 h-1 mx-4 ${step >= 3 ? 'bg-blue-600' : 'bg-gray-300'}`} />
          <div className={`flex items-center ${step >= 3 ? 'text-blue-600' : 'text-gray-400'}`}>
            <div className={`rounded-full h-10 w-10 flex items-center justify-center border-2 ${
              step >= 3 ? 'border-blue-600 bg-blue-600 text-white' : 'border-gray-300'
            }`}>
              3
            </div>
            <span className="ml-2 font-medium">확인 및 생성</span>
          </div>
        </div>
      </div>

      {/* 파일 업로드 영역 */}
      <div className="grid grid-cols-1 gap-8 lg:grid-cols-2">
        <div>
          <h3 className="text-lg font-medium text-gray-900 mb-4">1. 한전 청구서 PDF</h3>
          <FileUpload type="pdf" onUploadSuccess={handlePdfUpload} />
          {pdfData && (
            <div className="mt-4 bg-green-50 border border-green-200 rounded-md p-4">
              <p className="text-sm text-green-800">
                ✓ 총 청구액: {pdfData.totalAmount?.toLocaleString()}원
              </p>
              <p className="text-sm text-green-800">
                ✓ 총 사용량: {pdfData.totalUsage?.toLocaleString()} kWh
              </p>
            </div>
          )}
        </div>

        <div>
          <h3 className="text-lg font-medium text-gray-900 mb-4">2. 호실별 사용량 Excel</h3>
          <FileUpload type="excel" onUploadSuccess={handleExcelUpload} />
          {excelData && (
            <div className="mt-4 bg-green-50 border border-green-200 rounded-md p-4">
              <p className="text-sm text-green-800">
                ✓ 총 {excelData.length}개 호실 데이터 확인
              </p>
              <p className="text-sm text-green-800">
                ✓ 총 사용량: {excelData.reduce((sum, u) => sum + u.usage, 0).toLocaleString()} kWh
              </p>
            </div>
          )}
        </div>
      </div>

      {/* 처리 버튼 */}
      {pdfData && excelData && (
        <div className="mt-8 flex justify-center">
          <button
            onClick={handleProcess}
            disabled={isProcessing}
            className="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50"
          >
            {isProcessing ? (
              <>
                <div className="animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"></div>
                처리 중...
              </>
            ) : (
              '청구서 생성'
            )}
          </button>
        </div>
      )}
    </div>
  );
}
```

## 테스트 체크리스트

- [ ] 대시보드 통계 표시
- [ ] 차트 렌더링
- [ ] 청구서 목록 조회
- [ ] 청구서 상세 조회
- [ ] 파일 업로드 UI
- [ ] 청구서 생성 프로세스
- [ ] 재계산 기능
- [ ] 검색 및 필터링
- [ ] 반응형 디자인
- [ ] 모바일 네비게이션

## 성능 최적화

1. **데이터 페칭**
   - SWR 또는 React Query 사용
   - 캐싱 및 재검증
   - 무한 스크롤 구현

2. **번들 최적화**
   - 동적 임포트 사용
   - 차트 라이브러리 lazy loading
   - 이미지 최적화

3. **상태 관리**
   - Context API 또는 Zustand 사용
   - 전역 상태 최소화
   - 로컬 상태 우선

## 예상 소요 시간
- 레이아웃 구조: 2시간
- 대시보드 메인: 3시간
- 청구서 관리: 3시간
- 업로드 페이지: 2시간
- 차트 및 통계: 2시간
- 테스트 및 최적화: 2시간
- **총 예상 시간: 14시간**

## 다음 단계
Phase 5: 인증 시스템 구현으로 진행